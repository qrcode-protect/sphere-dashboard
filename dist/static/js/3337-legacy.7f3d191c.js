"use strict";(self["webpackChunksphere_dashboard"]=self["webpackChunksphere_dashboard"]||[]).push([[3337],{91325:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{X:function(){return useActivity}});var _mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(95082);var vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2262);var vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(66252);var _app_modules_activity_activity_repository__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(19296);var vuex__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(33907);var useActivity=function useActivity(){var store=(0,vuex__WEBPACK_IMPORTED_MODULE_2__.oR)();var state=(0,vue__WEBPACK_IMPORTED_MODULE_3__.qj)({activity:null});var fetchActivityById=function fetchActivityById(activityId){return(0,_app_modules_activity_activity_repository__WEBPACK_IMPORTED_MODULE_1__.g)(activityId)};var activities=(0,vue__WEBPACK_IMPORTED_MODULE_4__.Fl)({get:function get(){return store.getters["activity/activities"]},set:function set(value){return store.commit("activity/SET_ACTIVITIES",value)}});return(0,_mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,_mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)({},(0,vue__WEBPACK_IMPORTED_MODULE_3__.BK)(state)),{},{activities:activities,fetchActivityById:fetchActivityById,fetchAllActivities:function fetchAllActivities(){return store.dispatch("activity/fetchAll")}})}},77127:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return subdomain_checkbox}});var runtime_core_esm_bundler=__webpack_require__(66252);var shared_esm_bundler=__webpack_require__(3577);function render(_ctx,_cache,$props,$setup,$data,$options){var _component_ssf_icon=(0,runtime_core_esm_bundler.up)("ssf-icon");var _component_ssf_container=(0,runtime_core_esm_bundler.up)("ssf-container");return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_container,{class:(0,shared_esm_bundler.C_)([{"color-2":_ctx.isSelected},"px-2 cursor-pointer w-50"]),name:"subdomain-checkbox","not-full":"",onClick:_ctx.toggleSelected},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_icon,{icon:"".concat(_ctx.isSelected?"check":"square"),class:(0,shared_esm_bundler.C_)([{"color-1":_ctx.isSelected},"mr-2"]),light:""},null,8,["icon","class"]),(0,runtime_core_esm_bundler.Uk)((0,shared_esm_bundler.zw)(_ctx.activity.label),1)]})),_:1},8,["class","onClick"])}var objectSpread2=__webpack_require__(95082);var reactivity_esm_bundler=__webpack_require__(2262);var activity=__webpack_require__(16153);var subdomain_checkboxvue_type_script_lang_ts=(0,runtime_core_esm_bundler.aZ)({name:"subdomain-checkbox",props:{activity:{type:activity.Z,required:true},selected:{type:Boolean,required:false,default:false}},emits:["select","unselect"],setup:function setup(props,_ref){var emit=_ref.emit;var _ref2=function(){var state=(0,reactivity_esm_bundler.qj)({selected:false});var setSelected=function setSelected(value){state.selected=value;emit(state.selected?"select":"unselect",props.activity.id)};return(0,objectSpread2.Z)((0,objectSpread2.Z)({},(0,reactivity_esm_bundler.BK)(state)),{},{toggleSelected:function toggleSelected(){return setSelected(!state.selected)},setSelected:setSelected})}(),selected=_ref2.selected,toggleSelected=_ref2.toggleSelected,setSelected=_ref2.setSelected;var isSelected=(0,runtime_core_esm_bundler.Fl)((function(){return props.selected===true&&selected.value}));(0,runtime_core_esm_bundler.YP)((function(){return props.selected}),(function(){return setSelected(props.selected===true)}),{immediate:true});return{isSelected:isSelected,toggleSelected:toggleSelected}}});var exportHelper=__webpack_require__(83744);const __exports__=(0,exportHelper.Z)(subdomain_checkboxvue_type_script_lang_ts,[["render",render]]);var subdomain_checkbox=__exports__},53337:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:function(){return modal_edit_partner}});var es_array_includes=__webpack_require__(26699);var es_string_includes=__webpack_require__(32023);var runtime_core_esm_bundler=__webpack_require__(66252);var shared_esm_bundler=__webpack_require__(3577);var runtime_dom_esm_bundler=__webpack_require__(49963);var _hoisted_1=(0,runtime_core_esm_bundler._)("hr",{class:"w-75 mt-4"},null,-1);var _hoisted_2=(0,runtime_core_esm_bundler._)("h5",{class:"h5-responsive color-2 font-weight-semi-bold"},"Informations personnelles",-1);var _hoisted_3=(0,runtime_core_esm_bundler._)("h5",{class:"h5-responsive color-2 font-weight-semi-bold"},"Société / organisation",-1);var _hoisted_4=(0,runtime_core_esm_bundler.Uk)("Sous-domaines d'activités");var _hoisted_5={class:"btn bg-color-2 text-white font-weight-normal"};var _hoisted_6=(0,runtime_core_esm_bundler.Uk)(" Enregistrer les modifications ");function render(_ctx,_cache,$props,$setup,$data,$options){var _component_ssf_container=(0,runtime_core_esm_bundler.up)("ssf-container");var _component_ssf_col=(0,runtime_core_esm_bundler.up)("ssf-col");var _component_ssf_row=(0,runtime_core_esm_bundler.up)("ssf-row");var _component_ssf_form_group=(0,runtime_core_esm_bundler.up)("ssf-form-group");var _component_ssf_title=(0,runtime_core_esm_bundler.up)("ssf-title");var _component_subdomain_checkbox=(0,runtime_core_esm_bundler.up)("subdomain-checkbox");var _component_ssf_icon=(0,runtime_core_esm_bundler.up)("ssf-icon");var _component_ssf_modal=(0,runtime_core_esm_bundler.up)("ssf-modal");return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_modal,{modelValue:_ctx.visible,"onUpdate:modelValue":_cache[8]||(_cache[8]=function($event){return _ctx.visible=$event}),name:_ctx.modalName,attach:"#app","body-classes":"pt-2 border-0",classes:"modal-container modal-edit-partner","content-class":"modal-content z-depth-1 full-flex rounded mx-auto","fit-parent":"","header-classes":"pt-4 pb-2 d-block border-0",scrollable:"","lock-scroll":"",onBeforeClose:_ctx.closeModal},{header:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,{class:"modal-header-icon full-flex mx-auto border-color-2","not-full":""},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Uk)((0,shared_esm_bundler.zw)(_ctx.partner.companyName.toUpperCase()),1)]})),_:1})]})),_:1}),_hoisted_1]})),body:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler._)("form",{id:"joinUsForm",class:"join-us-form",onSubmit:_cache[7]||(_cache[7]=(0,runtime_dom_esm_bundler.iM)((function(){return _ctx.save&&_ctx.save.apply(_ctx,arguments)}),["prevent"]))},[(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"text-center",size:"12"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[_hoisted_2]})),_:1})]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_form_group,{value:_ctx.partner.lastname,col:"col-12 col-md-6",label:"Nom",name:"lastname",placeholder:"Nom",required:"","onUpdate:value":_cache[0]||(_cache[0]=function(event){return _ctx.partner.lastname=event})},null,8,["value"]),(0,runtime_core_esm_bundler.Wm)(_component_ssf_form_group,{value:_ctx.partner.firstname,col:"col-12 col-md-6",label:"Prénom",name:"firstname",placeholder:"Prénom",required:"","onUpdate:value":_cache[1]||(_cache[1]=function(event){return _ctx.partner.firstname=event})},null,8,["value"])]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_form_group,{"input-class":{"is-invalid":_ctx.duplicated},value:_ctx.partner.email,col:"col-8",label:"Adresse e-mail",name:"email",placeholder:"Adresse e-mail",required:"","onUpdate:value":_cache[2]||(_cache[2]=function(event){return _ctx.partner.email=event})},null,8,["input-class","value"]),(0,runtime_core_esm_bundler.Wm)(_component_ssf_form_group,{value:_ctx.partner.phone,col:"col-4",label:"Numéro de téléphone",name:"phone",placeholder:"Mobile / fixe",required:"",type:"tel","onUpdate:value":_cache[3]||(_cache[3]=function(event){return _ctx.partner.phone=event})},null,8,["value"])]})),_:1})]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"text-center",size:"12"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[_hoisted_3]})),_:1})]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_form_group,{value:_ctx.partner.companyName,col:"col-6",name:"companyName",placeholder:"Nom de la société",required:"","onUpdate:value":_cache[4]||(_cache[4]=function(event){return _ctx.partner.companyName=event})},null,8,["value"]),(0,runtime_core_esm_bundler.Wm)(_component_ssf_form_group,{value:_ctx.partner.siret,col:"col-6",label:"Siret",name:"siret",placeholder:"Siret",required:"","onUpdate:value":_cache[5]||(_cache[5]=function(event){return _ctx.partner.siret=event})},null,8,["value"])]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_form_group,{"option-items":_ctx.activities,value:_ctx.partner.activityId,label:"Domaine d'activité",name:"activityId","option-field":"id","option-label":"label",placeholder:"Domaine d'activité",row:"",select:"","onUpdate:value":_cache[6]||(_cache[6]=function(event){return _ctx.partner.activityId=event})},null,8,["option-items","value"]),_ctx.subActivitiesVisible?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_row,{key:0,class:"mb-4 col-12"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_title,{class:"h6-responsive",h6:""},{default:(0,runtime_core_esm_bundler.w5)((function(){return[_hoisted_4]})),_:1})]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[((0,runtime_core_esm_bundler.wg)(true),(0,runtime_core_esm_bundler.iD)(runtime_core_esm_bundler.HY,null,(0,runtime_core_esm_bundler.Ko)(_ctx.activity.activities,(function(subActivity){var _ctx$partner$activiti;return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_subdomain_checkbox,{activity:subActivity,selected:(_ctx$partner$activiti=_ctx.partner.activities)===null||_ctx$partner$activiti===void 0?void 0:_ctx$partner$activiti.includes(subActivity.id),onSelect:_ctx.onSubDomainSelect,class:"mx-auto",onUnselect:_ctx.onSubDomainUnselect},null,8,["activity","selected","onSelect","onUnselect"])})),256))]})),_:1})]})),_:1})]})),_:1})):(0,runtime_core_esm_bundler.kq)("",true)]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"text-center",size:"12"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler._)("button",_hoisted_5,[(0,runtime_core_esm_bundler.Wm)(_component_ssf_icon,{icon:"floppy-disk-pen",light:""}),_hoisted_6])]})),_:1})]})),_:1})]})),_:1})]})),_:1})],32)]})),_:1},8,["modelValue","name","onBeforeClose"])}var asyncToGenerator=__webpack_require__(48534);var regenerator=__webpack_require__(19298);var regenerator_default=__webpack_require__.n(regenerator);var reactivity_esm_bundler=__webpack_require__(2262);var partner=__webpack_require__(15891);var swal=__webpack_require__(62109);var lodash=__webpack_require__(96486);var activity_module=__webpack_require__(91325);var subdomain_checkbox=__webpack_require__(77127);var modal_edit_partnervue_type_script_lang_ts=(0,runtime_core_esm_bundler.aZ)({name:"modal-edit-partner",components:{SubdomainCheckbox:subdomain_checkbox.Z},props:{modalName:{type:String,required:false,default:"modal-create-user"},open:{type:Boolean,required:false,default:false},partner:{type:partner.Z,required:true},activities:{type:[Array,null],required:true}},emits:["close","save","edited"],setup:function setup(props,_ref){var emit=_ref.emit;var duplicated=(0,reactivity_esm_bundler.iH)(false);var visible=(0,reactivity_esm_bundler.iH)(false);var save=function save(){return props.partner.update().then((function(){return swal.mE.fire()&&emit("close")})).catch((function(error){return swal.zk.fire({text:error.message})}))};var _useActivity=(0,activity_module.X)(),activity=_useActivity.activity,fetchActivityById=_useActivity.fetchActivityById;(0,runtime_core_esm_bundler.YP)((function(){return props.partner.activityId}),function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(value){return regenerator_default().wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!value){_context.next=6;break}_context.next=3;return fetchActivityById(props.partner.activityId).catch((function(){return null}));case 3:_context.t0=activity.value=_context.sent;_context.next=7;break;case 6:_context.t0=null;case 7:return _context.abrupt("return",_context.t0);case 8:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref2.apply(this,arguments)}}(),{immediate:true});var subActivitiesVisible=(0,runtime_core_esm_bundler.Fl)((function(){return props.partner.activityId&&activity.value&&activity.value.activities&&activity.value.activities.length}));var onSubDomainSelect=function onSubDomainSelect(subDomainId){if(!props.partner.activities){props.partner.activities=[]}return(0,lodash.includes)(props.partner.activities,subDomainId)?null:props.partner.activities.push(subDomainId)};var onSubDomainUnselect=function onSubDomainUnselect(subDomainId){if(!props.partner.activities){props.partner.activities=[]}if((0,lodash.includes)(props.partner.activities,subDomainId)){props.partner.activities=(0,lodash.filter)(props.partner.activities,(function(item){return item!==subDomainId}))}};(0,runtime_core_esm_bundler.YP)((function(){return props.open}),(function(){return visible.value=props.open}),{immediate:true});return{duplicated:duplicated,visible:visible,save:save,closeModal:function closeModal(){return emit("close")},activity:activity,subActivitiesVisible:subActivitiesVisible,onSubDomainSelect:onSubDomainSelect,onSubDomainUnselect:onSubDomainUnselect}}});var exportHelper=__webpack_require__(83744);const __exports__=(0,exportHelper.Z)(modal_edit_partnervue_type_script_lang_ts,[["render",render]]);var modal_edit_partner=__exports__}}]);