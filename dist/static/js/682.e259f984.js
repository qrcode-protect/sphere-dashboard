"use strict";(self["webpackChunksphere_dashboard"]=self["webpackChunksphere_dashboard"]||[]).push([[682],{79687:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:function(){return modal_request_details}});var runtime_core_esm_bundler=__webpack_require__(66252);var shared_esm_bundler=__webpack_require__(3577);var _hoisted_1={style:{"list-style":"none"}};var _hoisted_2={class:"py-2"};var _hoisted_3=(0,runtime_core_esm_bundler.Uk)(" Devis ");var _hoisted_4={class:"secondary-item-small"};function render(_ctx,_cache,$props,$setup,$data,$options){var _component_ssf_title=(0,runtime_core_esm_bundler.up)("ssf-title");var _component_ssf_col=(0,runtime_core_esm_bundler.up)("ssf-col");var _component_ssf_row=(0,runtime_core_esm_bundler.up)("ssf-row");var _component_ssf_modal=(0,runtime_core_esm_bundler.up)("ssf-modal");return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_modal,{modelValue:_ctx.visible,"onUpdate:modelValue":_cache[1]||(_cache[1]=function($event){return _ctx.visible=$event}),name:_ctx.modalName,attach:"#app","body-classes":"pt-2 border-0",classes:"modal-container modal-request-details","content-class":"modal-content z-depth-1 full-flex rounded mx-auto","fit-parent":"","header-classes":"pt-4 pb-2 d-block border-0","lock-scroll":"",scrollable:"",onBeforeClose:_ctx.closeModal},{header:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_title,{center:"",class:"font-weight-semi-bold",h5:""},{default:(0,runtime_core_esm_bundler.w5)((function(){var _ctx$request$title;return[(0,runtime_core_esm_bundler.Uk)((0,shared_esm_bundler.zw)((_ctx$request$title=_ctx.request.title)===null||_ctx$request$title===void 0?void 0:_ctx$request$title.toUpperCase()),1)]})),_:1})]})),body:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler._)("ul",_hoisted_1,[((0,runtime_core_esm_bundler.wg)(true),(0,runtime_core_esm_bundler.iD)(runtime_core_esm_bundler.HY,null,(0,runtime_core_esm_bundler.Ko)(_ctx.keys,(function(key){return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.iD)("li",_hoisted_2,[(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"border-right font-weight-bold","max-width":"150"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Uk)((0,shared_esm_bundler.zw)(key.label),1)]})),_:2},1024),(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Uk)((0,shared_esm_bundler.zw)(key.casts?key.casts(_ctx.request[key.prop]):_ctx.request[key.prop]),1)]})),_:2},1024)]})),_:2},1024)])})),256))]),_ctx.request.accepted?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_row,{key:0},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"text-center",size:"12"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_title,{h5:""},{default:(0,runtime_core_esm_bundler.w5)((function(){return[_hoisted_3,(0,runtime_core_esm_bundler._)("span",_hoisted_4," - "+(0,shared_esm_bundler.zw)(_ctx.quotationStatus),1)]})),_:1})]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"text-center py-2",size:"12"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler._)("button",{class:"btn border border-color-1 color-1",onClick:_cache[0]||(_cache[0]=function($event){return _ctx.$emit("show-quotation",_ctx.request.quote)})}," Voir le devis ")]})),_:1})]})),_:1})):(0,runtime_core_esm_bundler.kq)("",true)]})),_:1},8,["modelValue","name","onBeforeClose"])}var reactivity_esm_bundler=__webpack_require__(2262);var request=__webpack_require__(97339);var request_module=__webpack_require__(64190);var vuex_esm_bundler=__webpack_require__(33907);var modal_request_detailsvue_type_script_lang_ts=(0,runtime_core_esm_bundler.aZ)({name:"modal-request-details",props:{modalName:{type:String,required:false,default:"modal-request-details"},open:{type:Boolean,required:false,default:false},request:{type:request.Z,required:true}},emits:["close","show-quotation"],setup:function setup(props,_ref){var emit=_ref.emit;var store=(0,vuex_esm_bundler.oR)();var visible=(0,reactivity_esm_bundler.iH)(false);(0,runtime_core_esm_bundler.YP)((function(){return props.open}),(function(){return visible.value=props.open}),{immediate:true});var _useRequest=(0,request_module.QT)(props.request),quotationStatus=_useRequest.quotationStatus;return{quotationStatus:quotationStatus,visible:visible,closeModal:function closeModal(){return emit("close")},keys:[{icon:"user",prop:"fullName",label:"Nom complet",casts:function casts(value){return value===null||value===void 0?void 0:value.wordCapitalize()}},{icon:"user",prop:"email",label:"Adresse e-mail",casts:function casts(){var _props$request$member,_props$request,_props$request$member2;return(_props$request$member=(_props$request=props.request)===null||_props$request===void 0?void 0:(_props$request$member2=_props$request.member.email)===null||_props$request$member2===void 0?void 0:_props$request$member2.toLowerCase())!==null&&_props$request$member!==void 0?_props$request$member:"N/D"}},{icon:"user-cowboy",prop:"user.company.label",label:"Société",casts:function casts(){var _props$request$member3,_props$request2,_props$request2$membe;return(_props$request$member3=(_props$request2=props.request)===null||_props$request2===void 0?void 0:(_props$request2$membe=_props$request2.member.companyName)===null||_props$request2$membe===void 0?void 0:_props$request2$membe.capitalize())!==null&&_props$request$member3!==void 0?_props$request$member3:"N/D"}},{icon:"tally",prop:"description",label:"Description"}]}},methods:{}});var exportHelper=__webpack_require__(83744);const __exports__=(0,exportHelper.Z)(modal_request_detailsvue_type_script_lang_ts,[["render",render]]);var modal_request_details=__exports__},84050:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:function(){return table_request_body}});var runtime_core_esm_bundler=__webpack_require__(66252);var _hoisted_1={class:"table-request-body"};function render(_ctx,_cache,$props,$setup,$data,$options){var _component_table_request_row=(0,runtime_core_esm_bundler.up)("table-request-row");return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.iD)("tbody",_hoisted_1,[((0,runtime_core_esm_bundler.wg)(true),(0,runtime_core_esm_bundler.iD)(runtime_core_esm_bundler.HY,null,(0,runtime_core_esm_bundler.Ko)(_ctx.requests,(function(request){return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_table_request_row,{request:request,onDetails:function onDetails($event){return _ctx.$emit("details",request)},onShowQuotation:_cache[0]||(_cache[0]=function(event){return _ctx.$emit("show-quotation",event)})},null,8,["request","onDetails"])})),256))])}var table_request_row=__webpack_require__(4952);var table_request_bodyvue_type_script_lang_ts=(0,runtime_core_esm_bundler.aZ)({name:"table-request-body",components:{TableRequestRow:table_request_row["default"]},props:{requests:{type:Array,required:true}},emits:["details","show-quotation"],setup:function setup(){return{}}});var exportHelper=__webpack_require__(83744);const __exports__=(0,exportHelper.Z)(table_request_bodyvue_type_script_lang_ts,[["render",render]]);var table_request_body=__exports__},10682:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:function(){return table_request}});var runtime_core_esm_bundler=__webpack_require__(66252);var shared_esm_bundler=__webpack_require__(3577);var _hoisted_1={class:"table"};var _hoisted_2={key:0};var _hoisted_3={class:"text-center color-2",colspan:"100%"};var _hoisted_4=(0,runtime_core_esm_bundler.Uk)(" Aucune donnée ");function render(_ctx,_cache,$props,$setup,$data,$options){var _component_ssf_title=(0,runtime_core_esm_bundler.up)("ssf-title");var _component_ssf_container=(0,runtime_core_esm_bundler.up)("ssf-container");var _component_table_request_head=(0,runtime_core_esm_bundler.up)("table-request-head");var _component_ssf_icon=(0,runtime_core_esm_bundler.up)("ssf-icon");var _component_table_request_body=(0,runtime_core_esm_bundler.up)("table-request-body");var _component_pagination=(0,runtime_core_esm_bundler.up)("pagination");var _component_ssf_row=(0,runtime_core_esm_bundler.up)("ssf-row");var _component_modal_request_details=(0,runtime_core_esm_bundler.up)("modal-request-details");var _component_modal_quotation=(0,runtime_core_esm_bundler.up)("modal-quotation");return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_container,{name:"table-request"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,{class:"table-responsive","not-full":""},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_title,{center:"",h5:"",class:"pt-3 pb-2"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Uk)((0,shared_esm_bundler.zw)(_ctx.title),1)]})),_:1})]})),_:1}),(0,runtime_core_esm_bundler._)("table",_hoisted_1,[(0,runtime_core_esm_bundler.Wm)(_component_table_request_head),_ctx.loading?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.iD)("tbody",_hoisted_2,[(0,runtime_core_esm_bundler._)("tr",null,[(0,runtime_core_esm_bundler._)("td",_hoisted_3,[(0,runtime_core_esm_bundler.Wm)(_component_ssf_icon,{class:"fa-spin",icon:"spinner-third",light:"",size:"3x"})])])])):_ctx.requests&&_ctx.requests.length?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_table_request_body,{key:1,requests:_ctx.requests,onDetails:_ctx.onShowRequestDetail,onShowQuotation:_ctx.onShowQuote},null,8,["requests","onDetails","onShowQuotation"])):(0,runtime_core_esm_bundler.kq)("",true),!_ctx.requests||_ctx.requests.length===0?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_title,{key:2,class:"secondary-item p-3",h6:""},{default:(0,runtime_core_esm_bundler.w5)((function(){return[_hoisted_4]})),_:1})):(0,runtime_core_esm_bundler.kq)("",true)]),_ctx.paginationData&&_ctx.requests&&_ctx.requests.length?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_row,{key:0},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_pagination,{count:_ctx.paginationData.latest,onNavigate:_ctx.onPaginationNavigate,class:"mx-auto"},null,8,["count","onNavigate"])]})),_:1})):(0,runtime_core_esm_bundler.kq)("",true)]})),_:1}),_ctx.modals.requestDetails.open?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_modal_request_details,{key:0,"modal-name":_ctx.modals.requestDetails.name,open:_ctx.modals.requestDetails.open,request:_ctx.modals.requestDetails.props.request,onClose:_ctx.onCloseRequestDetail,onShowQuotation:_ctx.onShowQuote},null,8,["modal-name","open","request","onClose","onShowQuotation"])):(0,runtime_core_esm_bundler.kq)("",true),_ctx.modals.quotation.open&&_ctx.modals.quotation.props.quotation?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_modal_quotation,{key:1,"modal-name":_ctx.modals.quotation.name,open:_ctx.modals.quotation.open,quotation:_ctx.modals.quotation.props.quotation,onClose:_cache[0]||(_cache[0]=function($event){return _ctx.modals.quotation.open=false})},null,8,["modal-name","open","quotation"])):(0,runtime_core_esm_bundler.kq)("",true)]})),_:1})}var objectSpread2=__webpack_require__(95082);var asyncToGenerator=__webpack_require__(48534);var regenerator=__webpack_require__(19298);var regenerator_default=__webpack_require__.n(regenerator);var reactivity_esm_bundler=__webpack_require__(2262);var table_request_body=__webpack_require__(84050);var table_request_head=__webpack_require__(81671);var modal_quotation=__webpack_require__(30743);var modal_request_details=__webpack_require__(79687);var request_module=__webpack_require__(64190);function paginationvue_type_template_id_91940246_render(_ctx,_cache,$props,$setup,$data,$options){var _component_ssf_pagination=(0,runtime_core_esm_bundler.up)("ssf-pagination");return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_pagination,{"click-handler":_ctx.onPageClick,"first-button-text":_ctx.icon("first"),"last-button-text":_ctx.icon("last"),"margin-pages":Math.min(_ctx.count,10),"next-text":_ctx.icon("next"),"page-count":_ctx.count,"prev-text":_ctx.icon("prev"),"active-class":"active-page","container-class":"filein-pagination pl-0","first-last-button":"","next-class":"d-inline-block","next-link-class":"filein-pagination-link","page-class":"d-inline-block","page-link-class":"filein-pagination-link rounded","prev-class":"d-inline-block","prev-link-class":"filein-pagination-link"},null,8,["click-handler","first-button-text","last-button-text","margin-pages","next-text","page-count","prev-text"])}var paginationvue_type_script_lang_js=(0,runtime_core_esm_bundler.aZ)({name:"pagination",props:{count:{type:[Number,String]}},emits:["navigate"],setup:function setup(props,_ref){var emit=_ref.emit;var icon=function icon(button){return'<i class="far fa-chevron-'.concat(button==="first"?"double-left":button==="prev"?"left":button==="last"?"double-right":"right",'"/>')};var onPageClick=function onPageClick(page){return emit("navigate",page)};return{icon:icon,onPageClick:onPageClick}}});var exportHelper=__webpack_require__(83744);const __exports__=(0,exportHelper.Z)(paginationvue_type_script_lang_js,[["render",paginationvue_type_template_id_91940246_render]]);var pagination=__exports__;var vue_router_esm_bundler=__webpack_require__(42119);var usePagination=function usePagination(callback){var state=(0,reactivity_esm_bundler.qj)({page:1,callback:callback,loading:false});var onPaginationNavigate=function(){var _ref=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(pageNumber){return regenerator_default().wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:state.page=pageNumber;if(!state.callback){_context.next=6;break}state.loading=true;_context.next=5;return state.callback(state.page);case 5:state.loading=false;case 6:case"end":return _context.stop()}}}),_callee)})));return function onPaginationNavigate(_x){return _ref.apply(this,arguments)}}();var setCallback=function setCallback(callback){return state.callback=callback};return(0,objectSpread2.Z)((0,objectSpread2.Z)({},(0,reactivity_esm_bundler.BK)(state)),{},{onPaginationNavigate:onPaginationNavigate,setCallback:setCallback})};var table_requestvue_type_script_lang_ts=(0,runtime_core_esm_bundler.aZ)({name:"table-request",components:{Pagination:pagination,ModalQuotation:modal_quotation["default"],ModalRequestDetails:modal_request_details["default"],ModalQuote:modal_quotation["default"],TableRequestHead:table_request_head["default"],TableRequestBody:table_request_body["default"]},emits:["details"],setup:function setup(){var modals=(0,reactivity_esm_bundler.qj)({quotation:{open:false,name:"modal-quotation",props:{quotation:null}},requestDetails:{open:false,name:"modal-request-details",props:{request:null}}});var _useRequest=(0,request_module.QT)(),fetchAllRequests=_useRequest.fetchAllRequestsPaginated,fetchAccepted=_useRequest.fetchAcceptedPaginated,fetchDeclined=_useRequest.fetchDeclinedPaginated,fetchPending=_useRequest.fetchPendingPaginated,fetchTerminated=_useRequest.fetchTerminatedPaginated,fetchDeniedByMember=_useRequest.fetchDeniedByMemberPaginated,paginationData=_useRequest.paginationData,requests=_useRequest.requests;var route=(0,vue_router_esm_bundler.yj)();var method=(0,reactivity_esm_bundler.iH)((function(){return null}));var title=(0,reactivity_esm_bundler.iH)(null);var methods={"history.requests.accepted":{method:fetchAccepted,title:"Acceptées par vos soins"},"history.requests.declined":{method:fetchDeclined,title:"Refusées par vous"},"history.requests.pending":{method:fetchPending,title:"En attente"},"history.requests.terminated":{method:fetchTerminated,title:"Terminées"},"history.requests.denied-by-member":{method:fetchDeniedByMember,title:"Refusées par le client"}};var _usePagination=usePagination(method.value),onPaginationNavigate=_usePagination.onPaginationNavigate,setCallback=_usePagination.setCallback,loading=_usePagination.loading;(0,runtime_core_esm_bundler.YP)((function(){return route.name}),(function(){var _methods$route$name;return method.value=((_methods$route$name=methods[route.name])!==null&&_methods$route$name!==void 0?_methods$route$name:{method:fetchAllRequests}).method}),{immediate:true});(0,runtime_core_esm_bundler.YP)((function(){return route.name}),(function(){var _methods$route$name2;return title.value=((_methods$route$name2=methods[route.name])!==null&&_methods$route$name2!==void 0?_methods$route$name2:{title:"Toutes les demandes"}).title}),{immediate:true});(0,runtime_core_esm_bundler.YP)((function(){return method.value}),(function(){method.value();return setCallback(method.value)}),{immediate:true});return{requests:requests,paginationData:paginationData,onPaginationNavigate:onPaginationNavigate,loading:loading,title:title,modals:modals,onShowQuote:function onShowQuote(quotation){modals.quotation.props.quotation=quotation;modals.quotation.open=!(quotation===null)},onShowRequestDetail:function onShowRequestDetail(request){modals.requestDetails.props.request=request;modals.requestDetails.open=true},onCloseRequestDetail:function(){var _onCloseRequestDetail=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(){return regenerator_default().wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:modals.requestDetails.props.request=null;modals.requestDetails.open=false;_context2.next=4;return fetchAllRequests();case 4:case"end":return _context2.stop()}}}),_callee2)})));function onCloseRequestDetail(){return _onCloseRequestDetail.apply(this,arguments)}return onCloseRequestDetail}()}}});const table_request_exports_=(0,exportHelper.Z)(table_requestvue_type_script_lang_ts,[["render",render]]);var table_request=table_request_exports_},30743:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:function(){return modal_quotation}});var runtime_core_esm_bundler=__webpack_require__(66252);var shared_esm_bundler=__webpack_require__(3577);var _hoisted_1=["href"];var _hoisted_2={key:0};var _hoisted_3={key:1};function render(_ctx,_cache,$props,$setup,$data,$options){var _component_ssf_icon=(0,runtime_core_esm_bundler.up)("ssf-icon");var _component_ssf_shape=(0,runtime_core_esm_bundler.up)("ssf-shape");var _component_ssf_col=(0,runtime_core_esm_bundler.up)("ssf-col");var _component_ssf_row=(0,runtime_core_esm_bundler.up)("ssf-row");var _component_ssf_container=(0,runtime_core_esm_bundler.up)("ssf-container");var _component_vue_pdf=(0,runtime_core_esm_bundler.up)("vue-pdf");var _component_ssf_modal=(0,runtime_core_esm_bundler.up)("ssf-modal");return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_modal,{modelValue:_ctx.visible,"onUpdate:modelValue":_cache[0]||(_cache[0]=function($event){return _ctx.visible=$event}),name:_ctx.modalName,attach:"#app","body-classes":"pt-2 border-0",classes:"modal-container modal-quotation","content-class":"modal-content z-depth-1 full-flex rounded mx-auto","fit-parent":"","header-classes":"py-2 d-block border-0 position-sticky","lock-scroll":"",scrollable:"",onBeforeOpen:_ctx.onBeforeOpen,onBeforeClose:_ctx.closeModal},{header:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,{class:"box-item rounded rounded-strong py-2"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"full-flex px-2","max-width":"40%"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,{class:"color-3"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"px-2 mx-auto mx-md-0","max-width":"46"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[_ctx.scale>0?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_shape,{key:0,center:"",circle:"",class:"cursor-pointer border border-color-3",size:"30",onClick:_ctx.zoomOutPdf},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_icon,{icon:"magnifying-glass-minus",regular:"",size:"sm"})]})),_:1},8,["onClick"])):(0,runtime_core_esm_bundler.kq)("",true)]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"px-2 mx-auto mx-md-0","max-width":"46"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_shape,{center:"",circle:"",class:"cursor-pointer border border-color-3",size:"30",onClick:_ctx.zoomInPdf},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_icon,{icon:"magnifying-glass-plus",regular:"",size:"sm"})]})),_:1},8,["onClick"])]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"px-2 mx-auto","max-width":"46"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_shape,{center:"",circle:"",class:"cursor-pointer border border-color-3",size:"30"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler._)("a",{href:_ctx.pdfUrl,class:"color-3",download:"",target:"_blank"},[(0,runtime_core_esm_bundler.Wm)(_component_ssf_icon,{icon:"download",regular:"",size:"sm"})],8,_hoisted_1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"px-2 mx-auto full-flex","max-width":"40%"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[_ctx.quotation.isPending()?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_row,{key:0,class:"d-flex justify-content-end"})):((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_container,{key:1,class:(0,shared_esm_bundler.C_)([{"bg-success":_ctx.quotation.accepted,"bg-danger":_ctx.quotation.declined},"mx-auto py-1 px-3 rounded mb-2 text-white tex-center h-100 full-flex"]),"not-full":""},{default:(0,runtime_core_esm_bundler.w5)((function(){return[_ctx.quotation.accepted?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.iD)("span",_hoisted_2,"Accepté")):((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.iD)("span",_hoisted_3,"Refusé"))]})),_:1},8,["class"]))]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"full-flex px-2"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,{class:"color-3"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_shape,{center:"",circle:"",class:"ahead bg-black text-white cursor-pointer ml-auto",size:"35",style:{opacity:".6"},title:"Fermer",onClick:_ctx.closeModal},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_icon,{icon:"times",size:"1x5",thin:""})]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),body:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,{class:"pdf-container mx-auto","not-full":"",relative:"",style:{height:"630px",width:"450px","max-height":"100%","max-width":"100%"}},{default:(0,runtime_core_esm_bundler.w5)((function(){return[_ctx.pdfUrl?((0,runtime_core_esm_bundler.wg)(true),(0,runtime_core_esm_bundler.iD)(runtime_core_esm_bundler.HY,{key:0},(0,runtime_core_esm_bundler.Ko)(_ctx.numOfPages,(function(page){return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_vue_pdf,{key:page,page:page,scale:_ctx.scale===0?null:_ctx.scale,src:_ctx.pdfUrl,"enable-text-selection":""},null,8,["page","scale","src"])})),128)):(0,runtime_core_esm_bundler.kq)("",true)]})),_:1})]})),_:1},8,["modelValue","name","onBeforeOpen","onBeforeClose"])}var asyncToGenerator=__webpack_require__(48534);var regenerator=__webpack_require__(19298);var regenerator_default=__webpack_require__.n(regenerator);var reactivity_esm_bundler=__webpack_require__(2262);var quote=__webpack_require__(51156);var vue3_pdfjs_esm=__webpack_require__(47943);var modal_quotationvue_type_script_lang_ts=(0,runtime_core_esm_bundler.aZ)({name:"modal-quotation",props:{modalName:{type:String,required:false,default:"modal-quotation"},open:{type:Boolean,required:false,default:false},quotation:{type:quote.Z,required:true}},components:{VuePdf:vue3_pdfjs_esm.v5},emits:["close"],setup:function setup(props,_ref){var emit=_ref.emit;var visible=(0,reactivity_esm_bundler.iH)(false);(0,runtime_core_esm_bundler.YP)((function(){return props.open}),(function(){return visible.value=props.open}),{immediate:true});var pdfUrl=(0,reactivity_esm_bundler.iH)(null);var numOfPages=(0,reactivity_esm_bundler.iH)(0);var scale=(0,reactivity_esm_bundler.iH)(0);var onBeforeOpen=function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){var tmp,loadingTask;return regenerator_default().wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(props.quotation.file).then((function(r){return r.blob()}));case 2:tmp=_context.sent;pdfUrl.value=URL.createObjectURL(new Blob([tmp],{type:"application/pdf"}));if(pdfUrl.value){loadingTask=(0,vue3_pdfjs_esm.x7)(pdfUrl.value);loadingTask.promise.then((function(pdf){numOfPages.value=pdf.numPages}))}case 5:case"end":return _context.stop()}}}),_callee)})));return function onBeforeOpen(){return _ref2.apply(this,arguments)}}();return{visible:visible,closeModal:function closeModal(){return emit("close")},onBeforeOpen:onBeforeOpen,pdfUrl:pdfUrl,numOfPages:numOfPages,scale:scale,zoomInPdf:function zoomInPdf(){var tmp=pdfUrl.value;pdfUrl.value=null;scale.value=scale.value+1;setTimeout((function(){return pdfUrl.value=tmp}),500)},zoomOutPdf:function zoomOutPdf(){var tmp=pdfUrl.value;pdfUrl.value=null;scale.value=scale.value-1;setTimeout((function(){return pdfUrl.value=tmp}),500)}}}});var exportHelper=__webpack_require__(83744);const __exports__=(0,exportHelper.Z)(modal_quotationvue_type_script_lang_ts,[["render",render]]);var modal_quotation=__exports__}}]);