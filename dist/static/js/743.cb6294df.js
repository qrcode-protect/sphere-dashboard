"use strict";(self["webpackChunksphere_dashboard"]=self["webpackChunksphere_dashboard"]||[]).push([[743],{30743:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:function(){return modal_quotation}});var runtime_core_esm_bundler=__webpack_require__(66252);var shared_esm_bundler=__webpack_require__(3577);var _hoisted_1=["href"];var _hoisted_2={key:0};var _hoisted_3={key:1};function render(_ctx,_cache,$props,$setup,$data,$options){var _component_ssf_icon=(0,runtime_core_esm_bundler.up)("ssf-icon");var _component_ssf_shape=(0,runtime_core_esm_bundler.up)("ssf-shape");var _component_ssf_col=(0,runtime_core_esm_bundler.up)("ssf-col");var _component_ssf_row=(0,runtime_core_esm_bundler.up)("ssf-row");var _component_ssf_container=(0,runtime_core_esm_bundler.up)("ssf-container");var _component_vue_pdf=(0,runtime_core_esm_bundler.up)("vue-pdf");var _component_ssf_modal=(0,runtime_core_esm_bundler.up)("ssf-modal");return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_modal,{modelValue:_ctx.visible,"onUpdate:modelValue":_cache[0]||(_cache[0]=function($event){return _ctx.visible=$event}),name:_ctx.modalName,attach:"#app","body-classes":"pt-2 border-0",classes:"modal-container modal-quotation","content-class":"modal-content z-depth-1 full-flex rounded mx-auto","fit-parent":"","header-classes":"py-2 d-block border-0 position-sticky","lock-scroll":"",scrollable:"",onBeforeOpen:_ctx.onBeforeOpen,onBeforeClose:_ctx.closeModal},{header:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,{class:"box-item rounded rounded-strong py-2"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"full-flex px-2","max-width":"40%"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,{class:"color-3"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"px-2 mx-auto mx-md-0","max-width":"46"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[_ctx.scale>0?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_shape,{key:0,center:"",circle:"",class:"cursor-pointer border border-color-3",size:"30",onClick:_ctx.zoomOutPdf},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_icon,{icon:"magnifying-glass-minus",regular:"",size:"sm"})]})),_:1},8,["onClick"])):(0,runtime_core_esm_bundler.kq)("",true)]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"px-2 mx-auto mx-md-0","max-width":"46"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_shape,{center:"",circle:"",class:"cursor-pointer border border-color-3",size:"30",onClick:_ctx.zoomInPdf},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_icon,{icon:"magnifying-glass-plus",regular:"",size:"sm"})]})),_:1},8,["onClick"])]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"px-2 mx-auto","max-width":"46"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_shape,{center:"",circle:"",class:"cursor-pointer border border-color-3",size:"30"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler._)("a",{href:_ctx.pdfUrl,class:"color-3",download:"",target:"_blank"},[(0,runtime_core_esm_bundler.Wm)(_component_ssf_icon,{icon:"download",regular:"",size:"sm"})],8,_hoisted_1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"px-2 mx-auto full-flex","max-width":"40%"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[_ctx.quotation.isPending()?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_row,{key:0,class:"d-flex justify-content-end"})):((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_container,{key:1,class:(0,shared_esm_bundler.C_)([{"bg-success":_ctx.quotation.accepted,"bg-danger":_ctx.quotation.declined},"mx-auto py-1 px-3 rounded mb-2 text-white tex-center h-100 full-flex"]),"not-full":""},{default:(0,runtime_core_esm_bundler.w5)((function(){return[_ctx.quotation.accepted?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.iD)("span",_hoisted_2,"Accepté")):((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.iD)("span",_hoisted_3,"Refusé"))]})),_:1},8,["class"]))]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"full-flex px-2"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,{class:"color-3"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_shape,{center:"",circle:"",class:"ahead bg-black text-white cursor-pointer ml-auto",size:"35",style:{opacity:".6"},title:"Fermer",onClick:_ctx.closeModal},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_icon,{icon:"times",size:"1x5",thin:""})]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),body:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,{class:"pdf-container mx-auto","not-full":"",relative:"",style:{height:"630px",width:"450px","max-height":"100%","max-width":"100%"}},{default:(0,runtime_core_esm_bundler.w5)((function(){return[_ctx.pdfUrl?((0,runtime_core_esm_bundler.wg)(true),(0,runtime_core_esm_bundler.iD)(runtime_core_esm_bundler.HY,{key:0},(0,runtime_core_esm_bundler.Ko)(_ctx.numOfPages,(function(page){return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_vue_pdf,{key:page,page:page,scale:_ctx.scale===0?null:_ctx.scale,src:_ctx.pdfUrl,"enable-text-selection":""},null,8,["page","scale","src"])})),128)):(0,runtime_core_esm_bundler.kq)("",true)]})),_:1})]})),_:1},8,["modelValue","name","onBeforeOpen","onBeforeClose"])}var asyncToGenerator=__webpack_require__(48534);var regenerator=__webpack_require__(19298);var regenerator_default=__webpack_require__.n(regenerator);var reactivity_esm_bundler=__webpack_require__(2262);var quote=__webpack_require__(51156);var vue3_pdfjs_esm=__webpack_require__(47943);var modal_quotationvue_type_script_lang_ts=(0,runtime_core_esm_bundler.aZ)({name:"modal-quotation",props:{modalName:{type:String,required:false,default:"modal-quotation"},open:{type:Boolean,required:false,default:false},quotation:{type:quote.Z,required:true}},components:{VuePdf:vue3_pdfjs_esm.v5},emits:["close"],setup:function setup(props,_ref){var emit=_ref.emit;var visible=(0,reactivity_esm_bundler.iH)(false);(0,runtime_core_esm_bundler.YP)((function(){return props.open}),(function(){return visible.value=props.open}),{immediate:true});var pdfUrl=(0,reactivity_esm_bundler.iH)(null);var numOfPages=(0,reactivity_esm_bundler.iH)(0);var scale=(0,reactivity_esm_bundler.iH)(0);var onBeforeOpen=function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){var tmp,loadingTask;return regenerator_default().wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(props.quotation.file).then((function(r){return r.blob()}));case 2:tmp=_context.sent;pdfUrl.value=URL.createObjectURL(new Blob([tmp],{type:"application/pdf"}));if(pdfUrl.value){loadingTask=(0,vue3_pdfjs_esm.x7)(pdfUrl.value);loadingTask.promise.then((function(pdf){numOfPages.value=pdf.numPages}))}case 5:case"end":return _context.stop()}}}),_callee)})));return function onBeforeOpen(){return _ref2.apply(this,arguments)}}();return{visible:visible,closeModal:function closeModal(){return emit("close")},onBeforeOpen:onBeforeOpen,pdfUrl:pdfUrl,numOfPages:numOfPages,scale:scale,zoomInPdf:function zoomInPdf(){var tmp=pdfUrl.value;pdfUrl.value=null;scale.value=scale.value+1;setTimeout((function(){return pdfUrl.value=tmp}),500)},zoomOutPdf:function zoomOutPdf(){var tmp=pdfUrl.value;pdfUrl.value=null;scale.value=scale.value-1;setTimeout((function(){return pdfUrl.value=tmp}),500)}}}});var exportHelper=__webpack_require__(83744);const __exports__=(0,exportHelper.Z)(modal_quotationvue_type_script_lang_ts,[["render",render]]);var modal_quotation=__exports__}}]);