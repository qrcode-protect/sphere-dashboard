"use strict";(self["webpackChunksphere_dashboard"]=self["webpackChunksphere_dashboard"]||[]).push([[2220],{56476:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:function(){return active_partner_card}});var runtime_core_esm_bundler=__webpack_require__(66252);var runtime_dom_esm_bundler=__webpack_require__(49963);var shared_esm_bundler=__webpack_require__(3577);var _withScopeId=function _withScopeId(n){return _pushScopeId("data-v-91d32d38"),n=n(),_popScopeId(),n};var _hoisted_1={class:"pl-0 mb-0"};var _hoisted_2=["onClick"];var _hoisted_3={class:"ml-2"};var _hoisted_4=(0,runtime_core_esm_bundler.Uk)("bloqué");function render(_ctx,_cache,$props,$setup,$data,$options){var _component_ssf_icon=(0,runtime_core_esm_bundler.up)("ssf-icon");var _component_card_company_info=(0,runtime_core_esm_bundler.up)("card-company-info");var _component_ssf_container=(0,runtime_core_esm_bundler.up)("ssf-container");var _component_ssf_text=(0,runtime_core_esm_bundler.up)("ssf-text");return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_container,{class:"position-relative","not-full":""},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_card_company_info,{icon:_ctx.icon,item:_ctx.partner,"item-keys":_ctx.itemKeys,"data-type":"partner","with-action":""},{"action-content":(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler._)("ul",_hoisted_1,[((0,runtime_core_esm_bundler.wg)(true),(0,runtime_core_esm_bundler.iD)(runtime_core_esm_bundler.HY,null,(0,runtime_core_esm_bundler.Ko)(_ctx.actions,(function(action,$idx){return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.iD)("li",{class:"action-item p-2 cursor-pointer rounded",onClick:(0,runtime_dom_esm_bundler.iM)(action.method,["prevent"])},[(0,runtime_core_esm_bundler.Wm)(_component_ssf_icon,{icon:action.icon,fw:"",light:""},null,8,["icon"]),(0,runtime_core_esm_bundler._)("span",_hoisted_3,(0,shared_esm_bundler.zw)(action.label),1)],8,_hoisted_2)})),256))])]})),_:1},8,["icon","item","item-keys"]),!(_ctx.partner.available===true)?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_container,{key:0,class:"blocked-banner full-absolute px-3 rounded"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,{class:"blocked-banner-bg bg-danger rounded"}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,{class:"blocked-banner-text full-flex full-absolute"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_text,{class:"text-white text-uppercase font-weight-bold"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[_hoisted_4]})),_:1})]})),_:1})]})),_:1})):(0,runtime_core_esm_bundler.kq)("",true)]})),_:1})}var vuex_esm_bundler=__webpack_require__(33907);var reactivity_esm_bundler=__webpack_require__(2262);var partner=__webpack_require__(15891);var swal=__webpack_require__(62045);var card_company_info=__webpack_require__(99880);var active_partner_cardvue_type_script_lang_ts=(0,runtime_core_esm_bundler.aZ)({name:"active-partner-card",components:{CardCompanyInfo:card_company_info.Z},props:{partner:{type:partner.Z,required:true},itemKeys:{type:Array,required:true},icon:{type:String,required:false}},emits:["destroyed","edit:partner"],setup:function setup(props,_ref){var emit=_ref.emit;var store=(0,vuex_esm_bundler.oR)();var destroy=function destroy(){return swal.JT.fire({html:"<span>Êtes-vous sûr(e) de vouloir supprimer ce partenaire ? <br/><span class='small'>(Cette action est irréversible)</span></span>",confirmButtonText:"Oui, j'en suis sûr",showCancelButton:true,cancelButtonText:"J'hésite encore",allowOutsideClick:false,customClass:{cancelButton:"rounded py-3 bg-warning",confirmButton:"rounded py-3 bg-danger"}}).then((function(answer){return answer.isConfirmed&&answer.value?props.partner.destroy().then((function(){swal.mE.fire();return emit("destroyed",props.partner.id)})).catch((function(error){return swal.zk.fire({text:error.message})})):null}))};var forgotPassword=function forgotPassword(){return props.partner.forgotPassword(props.partner.email).then((function(){return(0,swal.Am)("Le lien a bien été envoyé à au partenaire")}))};var openEditModal=function openEditModal(){return emit("edit:partner",props.partner)};var updateActions=function updateActions(){return actions.value=actionsList()};var toggleActive=function toggleActive(){return(props.partner.available===true?props.partner.block():props.partner.unblock()).then((function(){return updateActions()}))};var actionsList=function actionsList(){return[{method:openEditModal,label:"Modifier",icon:"pen"},{method:destroy,label:"Supprimer",icon:"trash-can-list"},{method:toggleActive,label:props.partner.available===true?"Bloquer":"Débloquer",icon:props.partner.available===true?"ban":"check-double"},{method:forgotPassword,label:"Réinitialiser le mot de passe",icon:"lock-keyhole"}]};var actions=(0,reactivity_esm_bundler.iH)(actionsList());return{actions:actions}}});var exportHelper=__webpack_require__(83744);const __exports__=(0,exportHelper.Z)(active_partner_cardvue_type_script_lang_ts,[["render",render],["__scopeId","data-v-91d32d38"]]);var active_partner_card=__exports__}}]);