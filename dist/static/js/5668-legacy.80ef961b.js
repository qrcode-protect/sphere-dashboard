"use strict";(self["webpackChunksphere_dashboard"]=self["webpackChunksphere_dashboard"]||[]).push([[5668,7305],{37670:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{c:function(){return useForm}});var _mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(95082);var vue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2262);var _app_commons_validation__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(81909);var useForm=function useForm(){var state=(0,vue__WEBPACK_IMPORTED_MODULE_2__.qj)({error:null,success:null,errors:[],loading:false});var validator=function validator(data){var _result$errors;var result=(0,_app_commons_validation__WEBPACK_IMPORTED_MODULE_1__.sC)(data);state.errors=(_result$errors=result.errors)!==null&&_result$errors!==void 0?_result$errors:[];state.error=result.error;return result.valid};var setLoading=function setLoading(value){return state.loading=value};var setError=function setError(value){return state.error=value};var setSuccess=function setSuccess(value){return state.success=value};return(0,_mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,_mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)({},(0,vue__WEBPACK_IMPORTED_MODULE_2__.BK)(state)),{},{validator:validator,setLoading:setLoading,setError:setError,setSuccess:setSuccess})}},91325:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{X:function(){return useActivity}});var _mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(95082);var vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2262);var vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(66252);var _app_modules_activity_activity_repository__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(19296);var vuex__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(33907);var useActivity=function useActivity(){var store=(0,vuex__WEBPACK_IMPORTED_MODULE_2__.oR)();var state=(0,vue__WEBPACK_IMPORTED_MODULE_3__.qj)({activity:null});var fetchActivityById=function fetchActivityById(activityId){return(0,_app_modules_activity_activity_repository__WEBPACK_IMPORTED_MODULE_1__.g)(activityId)};var activities=(0,vue__WEBPACK_IMPORTED_MODULE_4__.Fl)({get:function get(){return store.getters["activity/activities"]},set:function set(value){return store.commit("activity/SET_ACTIVITIES",value)}});return(0,_mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,_mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)({},(0,vue__WEBPACK_IMPORTED_MODULE_3__.BK)(state)),{},{activities:activities,fetchActivityById:fetchActivityById,fetchAllActivities:function fetchAllActivities(){return store.dispatch("activity/fetchAll")}})}},25907:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{DT:function(){return useTenderForm},iv:function(){return useTenders},zd:function(){return useTender}});var _mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(95082);var core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(73210);var core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_string_trim_js__WEBPACK_IMPORTED_MODULE_1__);var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(82526);var core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_symbol_js__WEBPACK_IMPORTED_MODULE_2__);var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(41817);var core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_symbol_description_js__WEBPACK_IMPORTED_MODULE_3__);var vue__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2262);var vue__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(66252);var vuex__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(33907);var _app_modules_tender_tender__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(99422);var _app_vue_utils_helpers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(56818);var _app_modules_member_member_repository__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(94474);var vue_router__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(42119);var lodash__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(96486);var lodash__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_7__);var useTenders=function useTenders(){var store=(0,vuex__WEBPACK_IMPORTED_MODULE_8__.oR)();var state=(0,vue__WEBPACK_IMPORTED_MODULE_9__.qj)([]);var tenders=(0,vue__WEBPACK_IMPORTED_MODULE_10__.Fl)((function(){return store.getters["tender/tenders"]}));return(0,_mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,_mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)({},(0,vue__WEBPACK_IMPORTED_MODULE_9__.BK)(state)),{},{tenders:tenders,hasTenders:(0,vue__WEBPACK_IMPORTED_MODULE_10__.Fl)((function(){return tenders.value&&tenders.value.length>0})),fetchAllTenders:function fetchAllTenders(){return store.dispatch("tender/fetchAll")},fetchActiveTenders:function fetchActiveTenders(){return store.dispatch("tender/fetchActive")},fetchInactiveTenders:function fetchInactiveTenders(){return store.dispatch("tender/fetchInactive")}})};var useTender=function useTender(tender){var dateFormat=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"DD/MM/YYYY";var router=(0,vue_router__WEBPACK_IMPORTED_MODULE_11__.tv)();var state=(0,vue__WEBPACK_IMPORTED_MODULE_9__.qj)({full:false,actions:[]});var actionsList=function actionsList(){return[{method:function method(){return router.push({name:"tenders.edit",params:{id:tender.id}})},label:"Modifier",icon:"pen"},{method:function method(){return tender.file&&typeof tender.file==="string"&&tender.file.trim()!==""?window.open(tender.file,"_blank"):null},label:"Ouvrir le document",icon:"file-pdf"},{method:destroy,label:"Supprimer",icon:"trash-can-list"},{method:toggleActive,label:tender.available?"Bloquer":"Débloquer",icon:tender.available?"ban":"check-double"},{method:togglePublic,label:tender.public?"Rendre privée":"Rendre publique",icon:tender.public?"lock-keyhole":"eye"}]};var _useTenders=useTenders(),fetchInactiveTenders=_useTenders.fetchInactiveTenders,fetchActiveTenders=_useTenders.fetchActiveTenders;var updateActions=function updateActions(){return state.actions=actionsList()};var destroy=function destroy(){return tender.destroy().then((function(){return tender.active?fetchActiveTenders():fetchInactiveTenders()}))};var togglePublic=function togglePublic(){return tender.togglePublic().then((function(response){tender.public=response.public;return updateActions()}))};var toggleActive=function toggleActive(){return(tender.available?tender.block():tender.unblock()).then((function(response){tender.available=response.available;return updateActions()}))};(0,vue__WEBPACK_IMPORTED_MODULE_10__.bv)((function(){return state.actions=actionsList()}));return(0,_mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,_mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)({},(0,vue__WEBPACK_IMPORTED_MODULE_9__.BK)(state)),{},{toggleFull:function toggleFull(){return state.full=!state.full},accept:function accept(){return tender.accept().then((function(){return fetchInactiveTenders()}))},deny:function deny(){return tender.deny().then((function(){return fetchInactiveTenders()}))},amount:(0,vue__WEBPACK_IMPORTED_MODULE_10__.Fl)((function(){return tender.amount?"".concat(_app_vue_utils_helpers__WEBPACK_IMPORTED_MODULE_5__.Rx.pretty(tender.amount),"€"):"aucun"})),publishedAt:(0,vue__WEBPACK_IMPORTED_MODULE_10__.Fl)((function(){var _tender$publishedAt$f,_tender$publishedAt;return(_tender$publishedAt$f=(_tender$publishedAt=tender.publishedAt)===null||_tender$publishedAt===void 0?void 0:_tender$publishedAt.format(dateFormat))!==null&&_tender$publishedAt$f!==void 0?_tender$publishedAt$f:"inconnue"})),expiresAt:(0,vue__WEBPACK_IMPORTED_MODULE_10__.Fl)((function(){var _tender$expiresAt$for,_tender$expiresAt;return(_tender$expiresAt$for=(_tender$expiresAt=tender.expiresAt)===null||_tender$expiresAt===void 0?void 0:_tender$expiresAt.format(dateFormat))!==null&&_tender$expiresAt$for!==void 0?_tender$expiresAt$for:"aucune"})),beginAt:(0,vue__WEBPACK_IMPORTED_MODULE_10__.Fl)((function(){var _tender$beginAt$forma,_tender$beginAt;return(_tender$beginAt$forma=(_tender$beginAt=tender.beginAt)===null||_tender$beginAt===void 0?void 0:_tender$beginAt.format(dateFormat))!==null&&_tender$beginAt$forma!==void 0?_tender$beginAt$forma:"aucune"})),endAt:(0,vue__WEBPACK_IMPORTED_MODULE_10__.Fl)((function(){var _tender$endAt$format,_tender$endAt;return(_tender$endAt$format=(_tender$endAt=tender.endAt)===null||_tender$endAt===void 0?void 0:_tender$endAt.format(dateFormat))!==null&&_tender$endAt$format!==void 0?_tender$endAt$format:"aucune"})),shortDescription:(0,vue__WEBPACK_IMPORTED_MODULE_10__.Fl)((function(){var _tender$description;return(_tender$description=tender.description)===null||_tender$description===void 0?void 0:_tender$description.substring(0,200)})),isActive:(0,vue__WEBPACK_IMPORTED_MODULE_10__.Fl)((function(){return tender.active}))})};var useTenderForm=function useTenderForm(){var isPublic=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var store=(0,vuex__WEBPACK_IMPORTED_MODULE_8__.oR)();var state=(0,vue__WEBPACK_IMPORTED_MODULE_9__.qj)({tender:_app_modules_tender_tender__WEBPACK_IMPORTED_MODULE_4__.Z.create({public:isPublic}),initialState:null,members:null});var fetchMembersByEmail=function fetchMembersByEmail(email){return(0,_app_modules_member_member_repository__WEBPACK_IMPORTED_MODULE_6__.ql)(email).then((function(members){return state.members=members}))};var fetchMembers=function fetchMembers(){return(0,_app_modules_member_member_repository__WEBPACK_IMPORTED_MODULE_6__.K0)().then((function(members){return state.members=members}))};var storeTender=function storeTender(){return store.dispatch("tender/store",{tender:state.tender}).then((function(){return state.tender=_app_modules_tender_tender__WEBPACK_IMPORTED_MODULE_4__.Z.create()}))};var editTender=function editTender(){return store.dispatch("tender/edit",{tender:(0,lodash__WEBPACK_IMPORTED_MODULE_7__.omit)(state.tender,(function(v,k){return state.initialState[k]===v}))}).then((function(){return fetchById(state.tender.id)}))};var fetchById=function fetchById(tenderId){return store.dispatch("tender/fetchById",{tenderId:tenderId}).then((function(response){state.initialState=response;return state.tender=response}))};return(0,_mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)((0,_mnt_c_Users_sofiane_Documents_IT_Projects_sphere_dashboard_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_0__.Z)({},(0,vue__WEBPACK_IMPORTED_MODULE_9__.BK)(state)),{},{fetchMembersByEmail:fetchMembersByEmail,fetchMembers:fetchMembers,storeTender:storeTender,editTender:editTender,fetchById:fetchById})}},77127:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return subdomain_checkbox}});var runtime_core_esm_bundler=__webpack_require__(66252);var shared_esm_bundler=__webpack_require__(3577);function render(_ctx,_cache,$props,$setup,$data,$options){var _component_ssf_icon=(0,runtime_core_esm_bundler.up)("ssf-icon");var _component_ssf_container=(0,runtime_core_esm_bundler.up)("ssf-container");return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_container,{class:(0,shared_esm_bundler.C_)([{"color-2":_ctx.isSelected},"px-2 cursor-pointer w-50"]),name:"subdomain-checkbox","not-full":"",onClick:_ctx.toggleSelected},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_icon,{icon:"".concat(_ctx.isSelected?"check":"square"),class:(0,shared_esm_bundler.C_)([{"color-1":_ctx.isSelected},"mr-2"]),light:""},null,8,["icon","class"]),(0,runtime_core_esm_bundler.Uk)((0,shared_esm_bundler.zw)(_ctx.activity.label),1)]})),_:1},8,["class","onClick"])}var objectSpread2=__webpack_require__(95082);var reactivity_esm_bundler=__webpack_require__(2262);var activity=__webpack_require__(16153);var subdomain_checkboxvue_type_script_lang_ts=(0,runtime_core_esm_bundler.aZ)({name:"subdomain-checkbox",props:{activity:{type:activity.Z,required:true},selected:{type:Boolean,required:false,default:false}},emits:["select","unselect"],setup:function setup(props,_ref){var emit=_ref.emit;var _ref2=function(){var state=(0,reactivity_esm_bundler.qj)({selected:false});var setSelected=function setSelected(value){state.selected=value;emit(state.selected?"select":"unselect",props.activity.id)};return(0,objectSpread2.Z)((0,objectSpread2.Z)({},(0,reactivity_esm_bundler.BK)(state)),{},{toggleSelected:function toggleSelected(){return setSelected(!state.selected)},setSelected:setSelected})}(),selected=_ref2.selected,toggleSelected=_ref2.toggleSelected,setSelected=_ref2.setSelected;var isSelected=(0,runtime_core_esm_bundler.Fl)((function(){return props.selected===true&&selected.value}));(0,runtime_core_esm_bundler.YP)((function(){return props.selected}),(function(){return setSelected(props.selected===true)}),{immediate:true});return{isSelected:isSelected,toggleSelected:toggleSelected}}});var exportHelper=__webpack_require__(83744);const __exports__=(0,exportHelper.Z)(subdomain_checkboxvue_type_script_lang_ts,[["render",render]]);var subdomain_checkbox=__exports__},27305:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:function(){return form_next_button}});var runtime_core_esm_bundler=__webpack_require__(66252);var shared_esm_bundler=__webpack_require__(3577);var _hoisted_1={class:"btn color-2 pr-0",type:"button"};function render(_ctx,_cache,$props,$setup,$data,$options){var _component_ssf_icon=(0,runtime_core_esm_bundler.up)("ssf-icon");var _component_ssf_col=(0,runtime_core_esm_bundler.up)("ssf-col");var _component_ssf_row=(0,runtime_core_esm_bundler.up)("ssf-row");var _component_ssf_container=(0,runtime_core_esm_bundler.up)("ssf-container");return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_container,{name:"form-next-button","not-full":"",onClick:_cache[0]||(_cache[0]=function($event){return _ctx.$emit("next")})},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_col,{class:"text-right",size:"12"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler._)("button",_hoisted_1,[(0,runtime_core_esm_bundler.Uk)((0,shared_esm_bundler.zw)(_ctx.text)+" ",1),(0,runtime_core_esm_bundler.Wm)(_component_ssf_icon,{icon:"arrow-to-right",light:""})])]})),_:1})]})),_:1})]})),_:1})}var form_next_buttonvue_type_script_lang_ts=(0,runtime_core_esm_bundler.aZ)({name:"form-next-button",emits:["next"],props:{text:{type:String,required:false,default:"Suivant"}},setup:function setup(){return{}}});var exportHelper=__webpack_require__(83744);const __exports__=(0,exportHelper.Z)(form_next_buttonvue_type_script_lang_ts,[["render",render]]);var form_next_button=__exports__},55668:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:function(){return form_tender_information}});var es_symbol=__webpack_require__(82526);var es_symbol_description=__webpack_require__(41817);var es_function_name=__webpack_require__(68309);var es_array_includes=__webpack_require__(26699);var es_string_includes=__webpack_require__(32023);var runtime_core_esm_bundler=__webpack_require__(66252);var _withScopeId=function _withScopeId(n){return _pushScopeId("data-v-2ad8ff86"),n=n(),_popScopeId(),n};var _hoisted_1=(0,runtime_core_esm_bundler.Uk)("Sous-domaines d'activités");function render(_ctx,_cache,$props,$setup,$data,$options){var _component_qrcp_input=(0,runtime_core_esm_bundler.up)("qrcp-input");var _component_ssf_row=(0,runtime_core_esm_bundler.up)("ssf-row");var _component_ssf_title=(0,runtime_core_esm_bundler.up)("ssf-title");var _component_ssf_container=(0,runtime_core_esm_bundler.up)("ssf-container");var _component_subdomain_checkbox=(0,runtime_core_esm_bundler.up)("subdomain-checkbox");var _component_form_next_button=(0,runtime_core_esm_bundler.up)("form-next-button");return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_container,{name:"form-tender-information"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_qrcp_input,{errors:_ctx.errors,value:_ctx.tender.title,col:"col-12 col-md-8",icon:"font",label:"Titre de l'affaire",name:"title",required:"","onUpdate:value":_cache[0]||(_cache[0]=function(event){return _ctx.tender.title=event})},null,8,["errors","value"]),(0,runtime_core_esm_bundler.Wm)(_component_qrcp_input,{errors:_ctx.errors,value:_ctx.tender.amount,col:"col-12 col-md-4",icon:"euro-sign",label:"Budget maximum",min:"1",name:"amount",type:"number","onUpdate:value":_cache[1]||(_cache[1]=function(event){return _ctx.tender.amount=event})},null,8,["errors","value"])]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_qrcp_input,{errors:_ctx.errors,value:_ctx.tender.description,icon:"message-captions",label:"Description",name:"description",required:"",row:"",textarea:"","onUpdate:value":_cache[2]||(_cache[2]=function(event){return _ctx.tender.description=event})},null,8,["errors","value"]),!_ctx.isEdition&&!_ctx.tender.public?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_qrcp_input,{key:0,errors:_ctx.errors,value:_ctx.searchPremiumMember,"form-group-class":"mb-0",icon:"magnifying-glass","input-class":"members-search",label:"Rechercher un adhérent (avec l'adresse e-mail)",name:"searchPremiumMember",row:"",onInput:_ctx.onSearchInput,"onUpdate:value":_ctx.onSearchPremiumMemberUpdateValue},null,8,["errors","value","onInput","onUpdate:value"])):(0,runtime_core_esm_bundler.kq)("",true),_ctx.members&&!_ctx.isEdition&&!_ctx.tender.public?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_qrcp_input,{key:1,errors:_ctx.errors,icon:_ctx.Member.icon.name,"option-items":_ctx.members,value:_ctx.tender.memberId,"form-group-class":"mt-0","input-class":"border-top-0 members-select",label:"Adhérents",name:"memberId","option-field":"id","option-label":"companyName",required:"",row:"",select:"","onUpdate:value":_cache[3]||(_cache[3]=function(event){return _ctx.tender.memberId=event})},null,8,["errors","icon","option-items","value"])):(0,runtime_core_esm_bundler.kq)("",true),_ctx.activities?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_qrcp_input,{key:2,errors:_ctx.errors,icon:_ctx.Activity.icon.name,"option-items":_ctx.activities,value:_ctx.tender.activityId,label:"Domaine d'activité",name:"activityId","option-field":"id","option-label":"label",required:"",row:"",select:"","wheel-propagation":"","onUpdate:value":_cache[4]||(_cache[4]=function(event){return _ctx.tender.activityId=event})},null,8,["errors","icon","option-items","value"])):(0,runtime_core_esm_bundler.kq)("",true),_ctx.subActivitiesVisible?((0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_ssf_row,{key:3,class:"mb-4 col-12"},{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_title,{class:"h6-responsive",h6:""},{default:(0,runtime_core_esm_bundler.w5)((function(){return[_hoisted_1]})),_:1})]})),_:1}),(0,runtime_core_esm_bundler.Wm)(_component_ssf_container,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[(0,runtime_core_esm_bundler.Wm)(_component_ssf_row,null,{default:(0,runtime_core_esm_bundler.w5)((function(){return[((0,runtime_core_esm_bundler.wg)(true),(0,runtime_core_esm_bundler.iD)(runtime_core_esm_bundler.HY,null,(0,runtime_core_esm_bundler.Ko)(_ctx.activity.activities,(function(subActivity){var _ctx$tender$activitie;return(0,runtime_core_esm_bundler.wg)(),(0,runtime_core_esm_bundler.j4)(_component_subdomain_checkbox,{activity:subActivity,selected:(_ctx$tender$activitie=_ctx.tender.activities)===null||_ctx$tender$activitie===void 0?void 0:_ctx$tender$activitie.includes(subActivity.id),onSelect:_ctx.onSubDomainSelect,onUnselect:_ctx.onSubDomainUnselect},null,8,["activity","selected","onSelect","onUnselect"])})),256))]})),_:1})]})),_:1})]})),_:1})):(0,runtime_core_esm_bundler.kq)("",true),(0,runtime_core_esm_bundler.Wm)(_component_form_next_button,{onNext:_ctx.onNext},null,8,["onNext"])]})),_:1})}var asyncToGenerator=__webpack_require__(48534);var regenerator=__webpack_require__(19298);var regenerator_default=__webpack_require__.n(regenerator);var es_string_trim=__webpack_require__(73210);var reactivity_esm_bundler=__webpack_require__(2262);var tender_module=__webpack_require__(25907);var qrcp_input=__webpack_require__(35396);var commons_form=__webpack_require__(37670);var member=__webpack_require__(73945);var lodash=__webpack_require__(96486);var form_next_button=__webpack_require__(27305);var tender=__webpack_require__(99422);var activity_module=__webpack_require__(91325);var activity_activity=__webpack_require__(16153);var subdomain_checkbox=__webpack_require__(77127);var form_tender_informationvue_type_script_lang_ts=(0,runtime_core_esm_bundler.aZ)({name:"form-tender-information",components:{SubdomainCheckbox:subdomain_checkbox.Z,FormNextButton:form_next_button["default"],QrcpInput:qrcp_input.Z},emits:["next"],props:{tender:{type:tender.Z,required:true},isEdition:{type:Boolean,required:false,default:false}},setup:function setup(props,_ref){var emit=_ref.emit;var _useTenderForm=(0,tender_module.DT)(),members=_useTenderForm.members,fetchMembersByEmail=_useTenderForm.fetchMembersByEmail,fetchMembers=_useTenderForm.fetchMembers;var _useForm=(0,commons_form.c)(),errors=_useForm.errors,validator=_useForm.validator;var searchPremiumMember=(0,reactivity_esm_bundler.iH)(null);var isTyping=(0,reactivity_esm_bundler.iH)(false);var onSearchPremiumMemberUpdateValue=function onSearchPremiumMemberUpdateValue(value){isTyping.value=true;searchPremiumMember.value=value};var onSearchInput=(0,lodash.debounce)((0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){return regenerator_default().wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isTyping.value=false;props.tender.memberId=null;if(!(searchPremiumMember.value&&searchPremiumMember.value.trim()!=="")){_context.next=7;break}_context.next=5;return fetchMembersByEmail(searchPremiumMember.value);case 5:_context.next=9;break;case 7:_context.next=9;return fetchMembers();case 9:case"end":return _context.stop()}}}),_callee)}))),500);(0,runtime_core_esm_bundler.bv)((0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(){return regenerator_default().wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetchMembers();case 2:_context2.next=4;return fetchAllActivities();case 4:case"end":return _context2.stop()}}}),_callee2)}))));var onNext=function onNext(){var tenderValue=props.tender;var toValidate={title:tenderValue.title,description:tenderValue.description,activityId:tenderValue.activityId,activities:tenderValue.activities};if(!tenderValue.public)toValidate.memberId=tenderValue.memberId;return props.isEdition||validator(toValidate)?emit("next"):null};var _useActivity=(0,activity_module.X)(),fetchAllActivities=_useActivity.fetchAllActivities,fetchActivityById=_useActivity.fetchActivityById,activities=_useActivity.activities,activity=_useActivity.activity;(0,runtime_core_esm_bundler.YP)((function(){return props.tender.activityId}),function(){var _ref4=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee3(value){return regenerator_default().wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!value){_context3.next=6;break}_context3.next=3;return fetchActivityById(props.tender.activityId).catch((function(){return null}));case 3:_context3.t0=activity.value=_context3.sent;_context3.next=7;break;case 6:_context3.t0=null;case 7:return _context3.abrupt("return",_context3.t0);case 8:case"end":return _context3.stop()}}}),_callee3)})));return function(_x){return _ref4.apply(this,arguments)}}(),{immediate:true});var subActivitiesVisible=(0,runtime_core_esm_bundler.Fl)((function(){return props.tender.activityId&&activity.value&&activity.value.activities&&activity.value.activities.length}));var onSubDomainSelect=function onSubDomainSelect(subDomainId){if(!props.tender.activities){props.tender.activities=[]}return(0,lodash.includes)(props.tender.activities,subDomainId)?null:props.tender.activities.push(subDomainId)};var onSubDomainUnselect=function onSubDomainUnselect(subDomainId){if(!props.tender.activities){props.tender.activities=[]}if((0,lodash.includes)(props.tender.activities,subDomainId)){props.tender.activities=(0,lodash.filter)(props.tender.activities,(function(item){return item!==subDomainId}))}};return{errors:errors,activities:activities,Activity:activity_activity.Z,activity:activity,subActivitiesVisible:subActivitiesVisible,onSubDomainSelect:onSubDomainSelect,onSubDomainUnselect:onSubDomainUnselect,onNext:onNext,members:members,onSearchInput:onSearchInput,onSearchPremiumMemberUpdateValue:onSearchPremiumMemberUpdateValue,searchPremiumMember:searchPremiumMember,Member:member.Z}}});var exportHelper=__webpack_require__(83744);const __exports__=(0,exportHelper.Z)(form_tender_informationvue_type_script_lang_ts,[["render",render],["__scopeId","data-v-2ad8ff86"]]);var form_tender_information=__exports__}}]);